services:
  # React frontend â€” built with nginx, proxies /api + /ws to backend
  frontend:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "47101:80"
    depends_on:
      - backend
    restart: unless-stopped

  # Node.js API + WebSocket backend
  backend:
    build:
      context: .
      dockerfile: Dockerfile.backend
    env_file:
      - .env
    volumes:
      # Persist data (sessions, tasks, reminders, etc.)
      - ./server/data:/app/server/data
      # Read-only access to OpenClaw data
      - /docker/openclaw-fndc/data/.openclaw:/data/.openclaw:ro
    restart: unless-stopped
